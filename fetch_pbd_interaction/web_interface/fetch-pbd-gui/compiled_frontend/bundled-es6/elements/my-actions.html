<html><head></head><body><div hidden="" by-polymer-bundler=""><dom-module id="paper-listbox" assetpath="../bower_components/paper-listbox/"><template><style>:host{display:block;padding:8px 0;background:var(--paper-listbox-background-color, --primary-background-color);color:var(--paper-listbox-color, --primary-text-color);@apply (--paper-listbox);}</style><content></content></template><script>(function(){Polymer({is:'paper-listbox',behaviors:[Polymer.IronMenuBehavior],hostAttributes:{role:'listbox'}})})();</script></dom-module></div><dom-module id="my-actions"><template><style>:host{display:block;height:100%;box-sizing:border-box;padding:8px 8px;}.title{@apply (--paper-font-display1);margin-bottom:10px;}iron-pages{height:100%;}iron-pages > section{height:100%;}paper-button{@apply (--paper-font-button);border-radius:2px;padding:6px 16px;height:36px;}paper-button:hover{background-color:#e0e0e0;}paper-button.delete:hover{background-color:#FFCDD2;}.createNew{background-color:#43A047;color:var(--primary-text-color);margin-left:0;margin-bottom:10px;}.delete{color:#D32F2F;}.backdrop{background-color:#fff;}.actionList{border-spacing:0;width:100%;}.actionList th, td{border-bottom:1px solid var(--divider-color);padding:5px 10px;}.actionList th{text-align:left;padding:15px;}.actionList tr:last-child td{border-bottom:none;}section paper-dialog-scrollable{@apply (--layout-flex);}.flex-horizontal{@apply (--layout-horizontal);width:100%;}.flexchild-horizontal{@apply (--layout-flex);}#viewer{overflow:hidden;padding-left:32px;}#actionName{padding-left:32px;}#buttons{padding-left:32px;}.left-content{display:flex;line-height:3;align-items:center;}.left-content > .left-content-item-name{flex:auto;}</style><paper-button class="createNew" raised="" on-tap="onCreate"><iron-icon icon="add"></iron-icon>Create new action</paper-button><paper-material class="backdrop"><table class="actionList"><thead><tr><th>Actions</th><th>Options</th></tr></thead><tbody><template is="dom-repeat" items="{{actions}}"><tr><td>{{item.name}}</td><td><paper-button on-tap="onRun" noink="" data-action$="{{item.action}}" disabled$="{{item.disabled}}"><iron-icon icon="av:play-circle-filled"></iron-icon>Run</paper-button><paper-button on-tap="onCopy" noink="" data-action$="{{item.action}}" disabled$="{{item.disabled}}"><iron-icon icon="content-copy"></iron-icon>Copy</paper-button><paper-button on-tap="onEdit" noink="" data-action$="{{item.action}}" disabled$="{{item.disabled}}"><iron-icon icon="image:edit"></iron-icon>Edit</paper-button><paper-button class="delete" on-tap="onDelete" noink="" data-action$="{{item.action}}" disabled$="{{item.disabled}}"><iron-icon icon="delete"></iron-icon>Delete</paper-button></td></tr></template></tbody></table></paper-material><paper-dialog id="statusDialog"><h2>Status</h2><p>'{{statusMessage}}'</p><div class="buttons"><paper-button dialog-confirm="" autofocus="">OK</paper-button></div></paper-dialog></template><script>Polymer({is:'my-actions',properties:{actions:{type:Array,value:[]},noActions:{type:Boolean,computed:'isEmpty(actions)'},globalOptions:{type:Object,value:function(){return{}},notify:!0},config:{computed:'_computeConfig(globalOptions, displays, sidebarOpened)',notify:!0,type:Object},displays:{type:Array,value:function(){return[]}},ros:{type:Object,observer:'_rosChanged'},sidebarOpened:{type:Boolean,value:!0},tfClient:Object,websocketUrl:{type:String,notify:!0,computed:'_computeWebsocketUrl(globalOptions.url)'},_viewer:Object,_urdf:Object,_grid:Object,_im:Object,action_buttons:[],expListener:Object,inputSrv:Object,expSrv:Object,statusMessage:String,pagePub:Object},isEmpty:function(a){return 0===a.length},attached:function(){var a=window.location.hostname,b=this;this.ros=new ROSLIB.Ros({url:'ws://'+a+':9090'}),this.expListener=new ROSLIB.Topic({ros:this.ros,name:'/fetch_pbd/session_state',messageType:'fetch_pbd_interaction/SessionState'}),this.expListener.subscribe(function(d){b.expCallback(b,d)}),this.pagePub=new ROSLIB.Topic({ros:this.ros,name:'/fetch_pbd/page_change',messageType:'std_msgs/String'}),this.inputSrv=new ROSLIB.Service({ros:this.ros,name:'/fetch_pbd/gui_input',serviceType:'fetch_pbd_interaction/GuiInput'}),this.expSrv=new ROSLIB.Service({ros:this.ros,name:'/fetch_pbd/get_session_state',serviceType:'fetch_pbd_interaction/GetSessionState'});var c=new ROSLIB.ServiceRequest({});this.expSrv.callService(c,function(d){b.expCallback(b,d.state)}),this.statusListener=new ROSLIB.Topic({ros:this.ros,name:'/fetch_pbd/fetch_pbd_status',messageType:'std_msgs/String'}),this.statusListener.subscribe(function(d){b.statusCallback(b,d)})},execute:function(){var a=new ROSLIB.ServiceRequest({command:'execute-action'});this.inputSrv.callService(a,function(){})},expCallback:function(a,b){for(a.actions=[],i=0;i<b.n_actions;i++){var c=i+'',d={action:c,name:b.action_names[i],disabled:b.actions_disabled[i]};a.push('actions',d)}},statusCallback:function(a,b){if(''!=b.data&&500<screen.width){a.statusMessage=b.data;var c=document.getElementById('statusDialog');c.open()}},onCreate:function(){var a=new ROSLIB.ServiceRequest({command:'create-action'});this.inputSrv.callService(a,function(){})},onEdit:function(a){var b=a.model.item.action,c=new ROSLIB.ServiceRequest({command:'switch-to-action',param:b});this.inputSrv.callService(c,function(){}),message=new ROSLIB.Message({data:'current-action'}),this.pagePub.publish(message)},onCopy:function(a){var b=a.model.item.action,c=new ROSLIB.ServiceRequest({command:'copy-action',param:b});this.inputSrv.callService(c,function(){}),message=new ROSLIB.Message({data:'current-action'}),this.pagePub.publish(message)},onRun:function(a){var b=a.model.item.action,c=new ROSLIB.ServiceRequest({command:'switch-to-action',param:b});this.inputSrv.callService(c,function(){}),this.execute()},onDelete:function(a){var b=a.model.item.action,c=new ROSLIB.ServiceRequest({command:'delete-action',param:b});this.inputSrv.callService(c,function(){})}});</script></dom-module></body></html>